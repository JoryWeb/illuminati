<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<template id="stock_inventory_template">
		    <t t-call="web.html_container">
            <t t-foreach="get_warehouse_data" t-as="warehouse_id">
                <t t-call="poi_stock_inventory_report.external_layout_stock_inventory">
                
                    <div class="page" style="font-size:12px;color:#000">
                        <style>
                            .header_table{
                                width:100%;
                            }
                            .header_table th{
                                padding:5px;
                                text-align:center;
                                border:1px solid black;
                                background:#c8cace;
                            }
                            .header_table td{
                                padding:5px;
                                text-align:center;
                                border:1px solid black;
                            }
                            .my_table{
                                width:100%;
                            }
                            .my_table th{
                                padding:5px;
                                border-bottom:1px solid #000;
                            }
                            .my_table td{
                                padding:5px;
                                border-bottom:1px solid #efefef;
                            }
                        </style>
                        <div class="row">
                            <center><h3>STOCK INVENTORY</h3></center><br/>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <table class="header_table">
                                    <thead>
                                        <tr>
                                            <th width="16.66%"> Company </th>
                                            <th width="16.66%"> Warehouse </th>
                                            <th width="16.66%"> Location </th>
                                            <th width="16.66%"> Date </th>
                                            <th width="16.66%"> Generated By </th>
                                            <th width="16.66%"> Generated Date </th>
                                        </tr>
                                    </thead>
                                    <tbody class="sale_tbody">
                                        <tr>
                                            <td> <span t-esc="get_wizard_data.company_id.name"/></td>
                                            <td> <span t-esc="warehouse_id.name"/></td>
                                            <td> <span t-esc="get_wizard_data.location_id.name"/></td>
                                            <td>
                                                <span t-esc="time.strftime('%d-%m-%Y',time.strptime(get_wizard_data.start_date,'%Y-%m-%d'))"/>
                                                To
                                                <span t-esc="time.strftime('%d-%m-%Y',time.strptime(get_wizard_data.end_date,'%Y-%m-%d'))"/>
                                            </td>
                                            <td> <span t-esc="user.name"/> </td>
                                            <td> <span t-esc="time.strftime('%d-%m-%Y %H:%M:%S')"/> </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>

                        <div class="row mt32 mb32"/>
                        <div class="row">
                            <div class="col-xs-12">
                                <table class="my_table">
                                    <thead>
                                        <tr>
                                            <th width="25%" style="background:#d6d6d6"> Product </th>
                                            <th width="12.5%" class="text-right" style="background:#d6d6d6"> Beginning </th>
                                            <th width="12.5%" class="text-right" style="background:#d6d6d6"> Received </th>
                                            <th width="12.5%" class="text-right" style="background:#d6d6d6"> Sales </th>
                                            <th width="12.5%" class="text-right" style="background:#d6d6d6"> Internal </th>
                                            <th width="12.5%" class="text-right" style="background:#d6d6d6"> Adjustments </th>
                                            <th width="12.5%" class="text-right" style="background:#d6d6d6"> Ending </th>
                                        </tr>
                                    </thead>
                                    <tbody class="sale_tbody">
                                        <t t-set="lines" t-value="get_lines" />
                                        <t t-if="not get_wizard_data.is_group_by_category">
                                            <t t-set="b_qty" t-value="0" />
                                            <t t-set="r_qty" t-value="0" />
                                            <t t-set="s_qty" t-value="0" />
                                            <t t-set="i_qty" t-value="0" />
                                            <t t-set="a_qty" t-value="0" />
                                            <t t-set="e_qty" t-value="0" />
                                            <t t-foreach="lines" t-as="line">
                                                <t t-set="b_qty" t-value="b_qty + line.get('beginning_qty')" />
                                                <t t-set="r_qty" t-value="r_qty + line.get('received_qty')" />
                                                <t t-set="s_qty" t-value="s_qty + line.get('sale_qty')" />
                                                <t t-set="i_qty" t-value="i_qty + line.get('internal_qty')" />
                                                <t t-set="a_qty" t-value="a_qty + line.get('adjust_qty')" />
                                                <t t-set="e_qty" t-value="e_qty + line.get('ending_qty')" />
                                                <tr style="page-break-inside: avoid">
                                                    <td class="text-left"> <span t-esc="line.get('product')"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('beginning_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('received_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('sale_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('internal_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('adjust_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('ending_qty'))"/></td>
                                                </tr>
                                            </t>
                                            <tr style="page-break-inside: avoid">
                                                <td class="text-right"> <b>Total</b> </td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(b_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(r_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(s_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(i_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(a_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(e_qty)"/></b></td>
                                            </tr>
                                        </t>
                                        <t t-if="get_wizard_data.is_group_by_category">
                                            <t t-set="lines" t-value="group_by_lines"/>
                                            <t t-foreach="lines" t-as="l_val">
                                                <tr style="page-break-inside: avoid">
                                                    <td style="background:#d6d6d6;border-top:1px solid black;border-bottom:1px solid black;" colspan="7">
                                                        <span t-esc="l_val.get('category')"/>
                                                    </td>
                                                </tr>
                                                <t t-set="b_qty" t-value="0" />
                                                <t t-set="r_qty" t-value="0" />
                                                <t t-set="s_qty" t-value="0" />
                                                <t t-set="i_qty" t-value="0" />
                                                <t t-set="a_qty" t-value="0" />
                                                <t t-set="e_qty" t-value="0" />
                                                <t t-foreach="l_val.get('values')" t-as="line">
                                                    <t t-set="b_qty" t-value="b_qty + line.get('beginning_qty')" />
                                                    <t t-set="r_qty" t-value="r_qty + line.get('received_qty')" />
                                                    <t t-set="s_qty" t-value="s_qty + line.get('sale_qty')" />
                                                    <t t-set="i_qty" t-value="i_qty + line.get('internal_qty')" />
                                                    <t t-set="a_qty" t-value="a_qty + line.get('adjust_qty')" />
                                                    <t t-set="e_qty" t-value="e_qty + line.get('ending_qty')" />
                                                    <tr style="page-break-inside: avoid">
                                                        <td class="text-left"> <span t-esc="line.get('product')"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('beginning_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('received_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('sale_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('internal_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('adjust_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('ending_qty'))"/></td>
                                                    </tr>
                                                </t>
                                                <tr style="page-break-inside: avoid">
                                                    <td class="text-right" style="border-bottom:1px solid black;border-top:1px solid black">
                                                        <b>Total</b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(b_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(r_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(s_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(i_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(a_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(e_qty)"/></b>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    <p style="page-break-before:always;"> </p>
                    </div>
                </t>
			</t>
			</t>
		</template>

</data>
</openerp>
	
